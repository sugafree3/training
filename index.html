<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>演唱會搶票速度訓練模擬器 - 單次點擊限制版</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #ff0080, #ff8c00);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.8;
            margin-bottom: 5px;
        }
        
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
        }
        
        .simulation-area {
            flex: 1;
            min-width: 300px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .stats-area {
            flex: 1;
            min-width: 300px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .concert-info {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .concert-poster {
            width: 120px;
            height: 120px;
            border-radius: 8px;
            overflow: hidden;
            margin-right: 20px;
            background: linear-gradient(45deg, #ff0080, #ff8c00);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
        }
        
        .concert-details h2 {
            font-size: 1.8rem;
            margin-bottom: 8px;
        }
        
        .concert-details p {
            opacity: 0.8;
            margin-bottom: 5px;
        }
        
        .countdown-info {
            text-align: center;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 25px;
        }
        
        .countdown-text {
            font-size: 1.1rem;
            margin-bottom: 10px;
        }
        
        .ticket-area {
            position: relative;
            height: 200px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        #combined-button {
            padding: 25px 60px;
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(255, 0, 128, 0.4);
            width: 80%;
            max-width: 400px;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            user-select: none;
        }
        
        #combined-button.countdown {
            background: linear-gradient(90deg, #1a1a2e, #16213e);
            color: #ff0080;
            cursor: not-allowed;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }
        
        #combined-button.ready {
            background: linear-gradient(90deg, #ff0080, #ff8c00);
            cursor: pointer;
            animation: pulse 1s infinite alternate;
        }
        
        #combined-button.ready:hover {
            transform: scale(1.02);
            box-shadow: 0 8px 25px rgba(255, 0, 128, 0.6);
        }
        
        #combined-button.clicked {
            background: linear-gradient(90deg, #00ff88, #00cc6a);
            transform: scale(0.95);
            cursor: default;
            animation: none;
        }
        
        #combined-button.disabled {
            background: linear-gradient(90deg, #666666, #888888);
            color: #cccccc;
            cursor: not-allowed;
            animation: none;
            transform: none;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .result-display {
            text-align: center;
            font-size: 1.3rem;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        #result-time {
            font-size: 2.2rem;
            font-weight: bold;
            color: #00ff88;
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
            margin-top: 5px;
        }
        
        .stats-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            text-align: center;
            color: #ff8c00;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .stat-box {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: #00ff88;
            margin: 10px 0 5px;
        }
        
        .stat-label {
            font-size: 1rem;
            opacity: 0.8;
        }
        
        .history-list {
            max-height: 250px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 15px;
        }
        
        .history-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: #ff8c00;
        }
        
        .history-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .history-item:last-child {
            border-bottom: none;
        }
        
        .history-time {
            color: #00ff88;
            font-weight: bold;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        button {
            padding: 12px 25px;
            font-size: 1.1rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        #start-btn {
            background: linear-gradient(90deg, #00b09b, #96c93d);
            color: white;
        }
        
        #start-btn:disabled {
            background: linear-gradient(90deg, #666666, #888888);
            color: #cccccc;
            cursor: not-allowed;
        }
        
        #reset-btn {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        button:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .instructions {
            margin-top: 30px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            font-size: 0.95rem;
            line-height: 1.6;
        }
        
        .instructions h3 {
            color: #ff8c00;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .instructions ul {
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 8px;
        }
        
        .pulse {
            animation: pulse 0.5s infinite alternate;
        }
        
        @keyframes pulse {
            from { box-shadow: 0 0 10px rgba(255, 0, 128, 0.5); }
            to { box-shadow: 0 0 20px rgba(255, 0, 128, 0.8); }
        }
        
        .success {
            animation: success 1s ease;
        }
        
        @keyframes success {
            0% { background-color: #00ff88; }
            50% { background-color: #00ff88; }
            100% { background-color: transparent; }
        }
        
        .difficulty-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }
        
        .difficulty-btn {
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            color: white;
        }
        
        .difficulty-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .difficulty-btn.active {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
        }
        
        .easy {
            background: linear-gradient(90deg, #00b09b, #96c93d);
        }
        
        .medium {
            background: linear-gradient(90deg, #ff8c00, #ff5500);
        }
        
        .hard {
            background: linear-gradient(90deg, #ff0080, #ff0000);
        }
        
        .combined-notice {
            text-align: center;
            color: #ff8c00;
            margin-top: 10px;
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .click-notice {
            text-align: center;
            color: #ff8c00;
            margin-top: 5px;
            font-size: 0.9rem;
            font-weight: bold;
            min-height: 20px;
        }
        
        .single-click-warning {
            background: rgba(255, 0, 128, 0.1);
            border-left: 4px solid #ff0080;
            padding: 10px 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            #combined-button {
                padding: 20px 40px;
                font-size: 2rem;
                min-height: 100px;
            }
        }
        
        /* 新增：按鈕狀態指示器 */
        .status-indicator {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: #666;
        }
        
        .status-dot.active {
            background-color: #00ff88;
        }
        
        .status-dot.waiting {
            background-color: #ff0080;
        }
        
        .status-label {
            text-align: center;
            margin-bottom: 10px;
            font-size: 1rem;
            color: #ff8c00;
        }
        
        .attempt-info {
            text-align: center;
            margin: 10px 0;
            color: #ff8c00;
            font-size: 1rem;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-guitar"></i> 演唱會搶票速度訓練模擬器</h1>
            <p class="subtitle">單次點擊限制版本 - 只能點擊一次，模擬真實搶票</p>
            <p class="subtitle">按鈕出現後只能點擊一次，點擊後立即失效</p>
        </header>
        
        <div class="main-content">
            <section class="simulation-area">
                <div class="concert-info">
                    <div class="concert-poster">
                        <i class="fas fa-music"></i>
                    </div>
                    <div class="concert-details">
                        <h2>超級巨星世界巡迴演唱會</h2>
                        <p><i class="far fa-calendar-alt"></i> 日期：2023年12月25日</p>
                        <p><i class="far fa-clock"></i> 時間：19:30 開場</p>
                        <p><i class="fas fa-map-marker-alt"></i> 地點：台北小巨蛋</p>
                        <p><i class="fas fa-ticket-alt"></i> 票價：$3,800 / $2,800 / $1,800</p>
                    </div>
                </div>
                
                <div class="countdown-info">
                    <div class="countdown-text">搶票倒數計時與按鈕合一</div>
                    <div class="status-label" id="status-label">準備開始</div>
                    <div class="status-indicator">
                        <div class="status-dot" id="status-dot-1"></div>
                        <div class="status-dot" id="status-dot-2"></div>
                        <div class="status-dot" id="status-dot-3"></div>
                    </div>
                </div>
                
                <div class="single-click-warning">
                    <i class="fas fa-exclamation-triangle"></i> 重要提示：按鈕出現後只能點擊一次！點擊後按鈕會立即失效，請務必準確點擊！
                </div>
                
                <div class="ticket-area">
                    <button id="combined-button">準備開始</button>
                </div>
                
                <div class="click-notice" id="click-notice">
                    <i class="fas fa-mouse-pointer"></i> 按鈕出現後，請立即點擊（只能點擊一次）
                </div>
                
                <div class="attempt-info" id="attempt-info">
                    本輪嘗試：尚未開始
                </div>
                
                <div class="result-display">
                    <div>反應時間：</div>
                    <div id="result-time">-- 秒</div>
                </div>
                
                <!-- 難度選擇 -->
                <div class="difficulty-selector">
                    <button class="difficulty-btn easy active" data-difficulty="easy" id="easy-btn">簡單模式 (5秒)</button>
                    <button class="difficulty-btn medium" data-difficulty="medium" id="medium-btn">中等模式 (3秒)</button>
                    <button class="difficulty-btn hard" data-difficulty="hard" id="hard-btn">困難模式 (2秒)</button>
                </div>
                
                <div class="controls">
                    <button id="start-btn"><i class="fas fa-play-circle"></i> 開始訓練</button>
                    <button id="reset-btn"><i class="fas fa-redo-alt"></i> 重設數據</button>
                </div>
            </section>
            
            <section class="stats-area">
                <h2 class="stats-title">訓練統計數據</h2>
                
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-label">嘗試次數</div>
                        <div class="stat-value" id="attempt-count">0</div>
                    </div>
                    
                    <div class="stat-box">
                        <div class="stat-label">最佳成績</div>
                        <div class="stat-value" id="best-time">--</div>
                    </div>
                    
                    <div class="stat-box">
                        <div class="stat-label">平均時間</div>
                        <div class="stat-value" id="average-time">--</div>
                    </div>
                    
                    <div class="stat-box">
                        <div class="stat-label">上次成績</div>
                        <div class="stat-value" id="last-time">--</div>
                    </div>
                </div>
                
                <div class="history">
                    <div class="history-title">最近10次記錄</div>
                    <div class="history-list" id="history-list">
                        <!-- 歷史記錄將在這裡動態生成 -->
                        <div class="history-item">尚未有記錄</div>
                    </div>
                </div>
            </section>
        </div>
        
        <div class="instructions">
            <h3><i class="fas fa-info-circle"></i> 使用說明 - 單次點擊限制版本</h3>
            <ul>
                <li>1. 選擇難度模式：簡單(5秒)、中等(3秒)、困難(2秒)倒數</li>
                <li>2. 點擊「開始訓練」按鈕開始模擬搶票</li>
                <li>3. 同一個按鈕會顯示倒數計時 (灰色不可點擊狀態)</li>
                <li>4. 倒數結束後，按鈕會變成橘紅色 (可點擊狀態)</li>
                <li>5. <strong>重要：按鈕只能點擊一次！</strong>點擊後按鈕會立即失效</li>
                <li>6. 系統會記錄你的反應時間並顯示結果</li>
                <li>7. 反覆練習以提高反應速度和準確性</li>
                <li>8. 使用「重設數據」按鈕清除所有統計資料</li>
                <li><strong>目標：</strong>專業搶票者的平均反應時間約為0.2-0.3秒，試著挑戰這個成績！</li>
            </ul>
        </div>
    </div>

    <script>
        // 元素引用
        const combinedButton = document.getElementById('combined-button');
        const startBtn = document.getElementById('start-btn');
        const resetBtn = document.getElementById('reset-btn');
        const resultTime = document.getElementById('result-time');
        const attemptCount = document.getElementById('attempt-count');
        const bestTime = document.getElementById('best-time');
        const averageTime = document.getElementById('average-time');
        const lastTime = document.getElementById('last-time');
        const historyList = document.getElementById('history-list');
        const difficultyButtons = document.querySelectorAll('.difficulty-btn');
        const statusLabel = document.getElementById('status-label');
        const statusDot1 = document.getElementById('status-dot-1');
        const statusDot2 = document.getElementById('status-dot-2');
        const statusDot3 = document.getElementById('status-dot-3');
        const clickNotice = document.getElementById('click-notice');
        const attemptInfo = document.getElementById('attempt-info');
        const easyBtn = document.getElementById('easy-btn');
        const mediumBtn = document.getElementById('medium-btn');
        const hardBtn = document.getElementById('hard-btn');
        
        // 狀態變量
        let isActive = false;
        let startTime = 0;
        let reactionTimes = [];
        let countdownInterval = null;
        let countdownValue = 5; // 預設值，會根據難度調整
        let currentDifficulty = 'easy'; // 預設難度
        let isButtonReady = false; // 按鈕是否準備好被點擊
        let hasClicked = false; // 是否已經點擊過
        let currentAttempt = 0; // 當前嘗試次數
        
        // 難度設定
        const difficultySettings = {
            easy: { countdown: 5, color: '#00b09b' },
            medium: { countdown: 3, color: '#ff8c00' },
            hard: { countdown: 2, color: '#ff0080' }
        };
        
        // 從本地存儲加載數據
        function loadStats() {
            const savedTimes = localStorage.getItem('reactionTimes');
            if (savedTimes) {
                reactionTimes = JSON.parse(savedTimes);
                updateStats();
                currentAttempt = reactionTimes.length;
            }
        }
        
        // 保存數據到本地存儲
        function saveStats() {
            localStorage.setItem('reactionTimes', JSON.stringify(reactionTimes));
        }
        
        // 更新統計數據顯示
        function updateStats() {
            const count = reactionTimes.length;
            attemptCount.textContent = count;
            
            if (count > 0) {
                // 最佳成績（最短時間）
                const minTime = Math.min(...reactionTimes);
                bestTime.textContent = minTime.toFixed(3) + 's';
                
                // 平均時間
                const avgTime = reactionTimes.reduce((a, b) => a + b, 0) / count;
                averageTime.textContent = avgTime.toFixed(3) + 's';
                
                // 上次成績
                const last = reactionTimes[count - 1];
                lastTime.textContent = last.toFixed(3) + 's';
                
                // 更新歷史記錄
                updateHistory();
            } else {
                bestTime.textContent = '--';
                averageTime.textContent = '--';
                lastTime.textContent = '--';
                historyList.innerHTML = '<div class="history-item">尚未有記錄</div>';
            }
        }
        
        // 更新歷史記錄列表
        function updateHistory() {
            historyList.innerHTML = '';
            const recentTimes = reactionTimes.slice(-10).reverse();
            
            if (recentTimes.length === 0) {
                historyList.innerHTML = '<div class="history-item">尚未有記錄</div>';
                return;
            }
            
            recentTimes.forEach((time, index) => {
                const item = document.createElement('div');
                item.className = 'history-item';
                item.innerHTML = `
                    <span>嘗試 #${reactionTimes.length - index}</span>
                    <span class="history-time">${time.toFixed(3)} 秒</span>
                `;
                historyList.appendChild(item);
            });
        }
        
        // 開始訓練
        function startTraining() {
            if (isActive) return;
            
            isActive = true;
            startBtn.disabled = true;
            isButtonReady = false;
            hasClicked = false;
            currentAttempt++;
            
            // 禁用難度選擇按鈕
            difficultyButtons.forEach(btn => {
                btn.disabled = true;
            });
            
            // 重置結果顯示
            resultTime.textContent = '-- 秒';
            attemptInfo.textContent = `本輪嘗試：#${currentAttempt}`;
            
            // 根據難度設置倒數時間
            countdownValue = difficultySettings[currentDifficulty].countdown;
            
            // 設置按鈕為倒數狀態
            combinedButton.className = 'countdown';
            combinedButton.textContent = countdownValue.toFixed(1);
            combinedButton.disabled = true;
            
            // 更新狀態指示器
            updateStatusIndicator('counting');
            clickNotice.innerHTML = '<i class="fas fa-hourglass-half"></i> 倒數計時中，請等待...';
            
            // 清除可能的計時器
            if (countdownInterval) clearInterval(countdownInterval);
            
            // 開始倒數計時
            countdownInterval = setInterval(() => {
                countdownValue -= 0.1;
                combinedButton.textContent = countdownValue.toFixed(1);
                
                if (countdownValue <= 0) {
                    clearInterval(countdownInterval);
                    // 倒數結束，按鈕變為可點擊
                    combinedButton.className = 'ready';
                    combinedButton.textContent = '立即搶票！';
                    combinedButton.disabled = false;
                    isButtonReady = true;
                    hasClicked = false;
                    startTime = Date.now();
                    
                    // 更新狀態指示器
                    updateStatusIndicator('ready');
                    clickNotice.innerHTML = '<i class="fas fa-mouse-pointer"></i> 按鈕已出現！立即點擊（只能點擊一次）';
                    
                    // 播放提示音
                    playBeepSound();
                    
                    // 設置自動超時（5秒後如果沒點擊，自動結束）
                    setTimeout(() => {
                        if (isButtonReady && !hasClicked) {
                            // 超時未點擊
                            handleTimeout();
                        }
                    }, 5000);
                }
            }, 100);
        }
        
        // 處理超時未點擊
        function handleTimeout() {
            if (!isActive || hasClicked) return;
            
            clickNotice.innerHTML = '<i class="fas fa-clock"></i> 超時未點擊！本次嘗試無效';
            attemptInfo.textContent = `本輪嘗試：#${currentAttempt} (超時未點擊)`;
            
            // 重置狀態（3秒後）
            setTimeout(() => {
                resetTraining();
            }, 3000);
        }
        
        // 處理按鈕點擊
        function handleButtonClick() {
            if (!isActive || !isButtonReady || hasClicked) return;
            
            // 標記已經點擊過
            hasClicked = true;
            isButtonReady = false;
            
            // 立即禁用按鈕，防止再次點擊
            combinedButton.disabled = true;
            combinedButton.className = 'clicked';
            
            const reactionTime = (Date.now() - startTime) / 1000; // 轉換為秒
            reactionTimes.push(reactionTime);
            
            // 顯示結果
            resultTime.textContent = reactionTime.toFixed(3) + ' 秒';
            resultTime.parentElement.classList.add('success');
            
            // 按鈕視覺反饋
            combinedButton.textContent = '搶票成功！';
            clickNotice.innerHTML = '<i class="fas fa-check-circle"></i> 已成功點擊！等待下一輪';
            
            // 頁面視覺反饋
            document.body.style.backgroundColor = '#003315';
            setTimeout(() => {
                document.body.style.backgroundColor = '';
                resultTime.parentElement.classList.remove('success');
            }, 300);
            
            // 更新統計數據
            updateStats();
            saveStats();
            
            // 更新狀態指示器
            updateStatusIndicator('success');
            
            // 播放成功音效
            playSuccessSound();
            
            // 重置狀態（3秒後）
            setTimeout(() => {
                resetTraining();
            }, 3000);
        }
        
        // 重置訓練
        function resetTraining() {
            isActive = false;
            startBtn.disabled = false;
            isButtonReady = false;
            hasClicked = false;
            startTime = 0;
            
            // 啟用難度選擇按鈕
            difficultyButtons.forEach(btn => {
                btn.disabled = false;
            });
            
            // 重新啟用當前難度按鈕的active狀態
            setDifficulty(currentDifficulty);
            
            if (countdownInterval) clearInterval(countdownInterval);
            
            combinedButton.className = '';
            combinedButton.textContent = '準備開始';
            combinedButton.disabled = false;
            
            // 更新狀態指示器
            updateStatusIndicator('idle');
            clickNotice.innerHTML = '<i class="fas fa-mouse-pointer"></i> 按鈕出現後，請立即點擊（只能點擊一次）';
            attemptInfo.textContent = '本輪嘗試：尚未開始';
        }
        
        // 重設所有數據
        function resetStats() {
            reactionTimes = [];
            currentAttempt = 0;
            updateStats();
            saveStats();
            resetTraining();
            resultTime.textContent = '-- 秒';
        }
        
        // 設置難度
        function setDifficulty(difficulty) {
            currentDifficulty = difficulty;
            
            // 更新按鈕狀態
            difficultyButtons.forEach(btn => {
                if (btn.dataset.difficulty === difficulty) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
            
            // 更新狀態指示器顏色
            updateStatusIndicator('idle');
        }
        
        // 更新狀態指示器
        function updateStatusIndicator(status) {
            // 重置所有指示燈
            statusDot1.className = 'status-dot';
            statusDot2.className = 'status-dot';
            statusDot3.className = 'status-dot';
            
            switch(status) {
                case 'idle':
                    statusLabel.textContent = '準備開始';
                    statusDot1.className = 'status-dot active';
                    break;
                case 'counting':
                    statusLabel.textContent = '倒數計時中...';
                    statusDot1.className = 'status-dot waiting';
                    statusDot2.className = 'status-dot waiting';
                    break;
                case 'ready':
                    statusLabel.textContent = '立即點擊！';
                    statusDot1.className = 'status-dot waiting';
                    statusDot2.className = 'status-dot waiting';
                    statusDot3.className = 'status-dot active';
                    break;
                case 'success':
                    statusLabel.textContent = '搶票成功！';
                    statusDot1.className = 'status-dot active';
                    statusDot2.className = 'status-dot active';
                    statusDot3.className = 'status-dot active';
                    break;
            }
        }
        
        // 播放提示音
        function playBeepSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 800;
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
            } catch (e) {
                console.log("音頻播放失敗，可能是瀏覽器限制");
            }
        }
        
        // 播放成功音效
        function playSuccessSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 1200;
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.3);
                
                // 第二個高頻音
                setTimeout(() => {
                    const oscillator2 = audioContext.createOscillator();
                    const gainNode2 = audioContext.createGain();
                    
                    oscillator2.connect(gainNode2);
                    gainNode2.connect(audioContext.destination);
                    
                    oscillator2.frequency.value = 1500;
                    oscillator2.type = 'sine';
                    
                    gainNode2.gain.setValueAtTime(0.2, audioContext.currentTime);
                    gainNode2.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                    
                    oscillator2.start(audioContext.currentTime);
                    oscillator2.stop(audioContext.currentTime + 0.2);
                }, 150);
            } catch (e) {
                console.log("音頻播放失敗，可能是瀏覽器限制");
            }
        }
        
        // 事件監聽
        startBtn.addEventListener('click', startTraining);
        resetBtn.addEventListener('click', resetStats);
        combinedButton.addEventListener('click', handleButtonClick);
        
        // 難度選擇事件
        difficultyButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                setDifficulty(btn.dataset.difficulty);
            });
        });
        
        // 初始化
        loadStats();
        setDifficulty('easy'); // 預設為簡單模式
        updateStatusIndicator('idle');
        
        // 初始提示
        console.log("單次點擊限制版本 - 按鈕只能點擊一次！準備好訓練你的搶票反應速度了嗎？");
    </script>
</body>
</html>
